from carbon_emission_flow import carbon_flow_caculation, system_balance_check
import numpy as np

mpc = {# case9系统
    'version': '2',
    'baseMVA': 100,
    'bus': np.array([
        # bus_i type Pd Qd Gs Bs area Vm Va baseKV zone Vmax Vmin
        [1, 3, 0, 0, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [2, 2, 0, 0, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [3, 2, 0, 0, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [4, 1, 0, 0, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [5, 1,90,30, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [6, 1,100, 0, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [7, 1,100,35,0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [8, 1,100, 0, 0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
        [9, 1,125,50,0, 0, 1, 1, 0, 345, 1, 1.1, 0.9],
    ]),
    'gen': np.array([
        # bus Pg Qg Qmax Qmin Vg mBase status Pmax Pmin
        [1, 0, 0, 0, 0, 1.025, 100, 1, 600, 0],
        [2, 163, 0, 0, 0, 1.00, 100, 1, 600, 0],
        [3, 85, 0, 0, 0, 1.00, 100, 1, 600, 0],
    ]),
    'branch': np.array([
        # fbus tbus r x b rateA rateB rateC ratio angle status angmin angmax
        [1, 4, 0.0, 0.0576, 0.0, 250, 250, 250, 0, 0, 1, -360, 360],
        [4, 5, 0.017, 0.092, 0.158, 250, 250, 250, 0, 0, 1, -360, 360],
        [5, 6, 0.039, 0.17, 0.358, 250, 250, 250, 0, 0, 1, -360, 360],
        [3, 6, 0, 0.0586, 0, 250, 250, 250, 0, 0, 1, -360, 360],
        [6, 7, 0.0119, 0.1008, 0.209, 250, 250, 250, 0, 0, 1, -360, 360],
        [7, 8, 0.0085, 0.072, 0.149,250, 250, 250, 0, 0, 1, -360, 360],
        [8, 2, 0, 0.0625, 0, 250, 250, 250, 0, 0, 1, -360, 360],
        [8, 9, 0.032, 0.161, 0.306, 250, 250, 250, 0, 0, 1, -360, 360],
        [9, 4, 0.01, 0.085, 0.176, 250, 250, 250, 0, 0, 1, -360, 360],
    ])
}
unit_carbon_paras = np.array([
    [0.0004, 0.12, 2.5, 1.01, 0.80, 0.98, 0.8],
    [0.0010, 0.14, 4.0, 1.00, 0.80, 0.98, 0],
    [0.0010, 0.14, 4.0, 0.00, 0.80, 0.98, 0],
])
carbon_flow_res = carbon_flow_caculation(mpc, unit_carbon_paras, 1)
breakpoint